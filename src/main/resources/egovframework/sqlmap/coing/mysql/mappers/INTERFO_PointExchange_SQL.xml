<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.coing.point.service.impl.PointExchangeMapper">

  <select id="selectAll" resultType="pointExchangeVO">
    SELECT INTERFO_POINT_EXCHANGE.*
         , COING_MEMBER_GENERAL.MEM_NAME
      FROM INTERFO_POINT_EXCHANGE
      JOIN COING_MEMBER_GENERAL ON INTERFO_POINT_EXCHANGE.MEM_ID = COING_MEMBER_GENERAL.MEM_ID
  ORDER BY INTERFO_POINT_EXCHANGE.ID DESC
  </select>

  <select id="select" resultType="pointExchangeVO" parameterType="pointExchangeVO">
    SELECT INTERFO_POINT_EXCHANGE.*
         , COING_MEMBER_GENERAL.MEM_NAME
      FROM INTERFO_POINT_EXCHANGE
      JOIN COING_MEMBER_GENERAL ON INTERFO_POINT_EXCHANGE.MEM_ID = COING_MEMBER_GENERAL.MEM_ID
  ORDER BY INTERFO_POINT_EXCHANGE.ID DESC
  </select>
  
  <select id="count" resultType="int" parameterType="pointExchangeVO">
    SELECT COUNT(*)
      FROM INTERFO_POINT_EXCHANGE
  </select>
  
  <select id="selectOne" resultType="pointExchangeVO">
    SELECT INTERFO_POINT_EXCHANGE.*
         , COING_MEMBER_GENERAL.MEM_NAME
      FROM INTERFO_POINT_EXCHANGE
      JOIN COING_MEMBER_GENERAL ON INTERFO_POINT_EXCHANGE.MEM_ID = COING_MEMBER_GENERAL.MEM_ID
    <where>
       AND INTERFO_POINT_EXCHANGE.ID = #{id}
    </where>
  </select>
  
  <insert id="insert" parameterType="pointExchangeVO">
    INSERT INTO INTERFO_POINT_EXCHANGE
    (
      MEM_ID
    , EXCHANGE_POINT
    , STATUS
    )
    VALUES
    (
      #{memId}
    , #{exchangePoint}
    , #{status}
    )
  </insert>
  
  <update id="update" parameterType="pointExchangeVO">
    UPDATE INTERFO_POINT_EXCHANGE
       SET EXCHANGE_POINT = #{exchangePoint}
         , BANK = #{bank}
         , BANK_ACCOUNT_NUMBER = #{bankAccountNumber}
         , HP = #{hp}
     WHERE ID = #{id}
  </update>
  
  <update id="updateStatusConfirm" parameterType="pointExchangeVO">
    UPDATE INTERFO_POINT_EXCHANGE
       SET STATUS = 'CONFIRM'
         , CONFIRM_DTTM = NOW()
     WHERE ID = #{id}
  </update>

</mapper>